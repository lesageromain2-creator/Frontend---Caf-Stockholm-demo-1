class PopupManager{constructor(e={}){this.cookieName=e.cookieName||"cookies_name",this.cookieValue=e.cookieValue||"1",this.cookieDays=e.cookieDays||0,this.popupContent=e.popupContent||'<div class="class"></div>'}init(){this.getCookie(this.cookieName)&&"0"!=this.getCookie(this.cookieName)||(this.showPopup(),"function"==typeof this.bindEvents&&this.bindEvents())}setCookie(e,t,s){let o="";var i;s&&((i=new Date).setTime(i.getTime()+24*s*60*60*1e3),o="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path=/"}getCookie(e){var s=e+"=",o=document.cookie.split(";");for(let t=0;t<o.length;t++){let e=o[t];for(;" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(s))return e.substring(s.length,e.length)}return null}showPopup(){let t=this,s=$(this.popupContent);var e=$('<button type="button" class="close-btn">&times;</button>'),o=(e.on("click",()=>{t.closePopup(s)}),s.find("div").first());(0<o.length?o:s).append(e),s.on("click",function(e){e.target===this&&t.closePopup(s)}),$("body").append(s),$("body").addClass("noScroll")}closePopup(e){e.remove(),$("body").removeClass("noScroll"),this.setCookie(this.cookieName,this.cookieValue,this.cookieDays)}}let PierreAssistBanner={selectors:{banner:"#pab_main",closeBtn:".pab__close",imgBanner:".pab__banner"},init:function(){this.bindEvents();var e=getCookie("desktopAppBanner");e&&$(this.selectors.banner).addClass("pab__closed")},bindEvents:function(){let t=this;$(document).on("click touchend",this.selectors.closeBtn,function(e){e.preventDefault(),e.stopPropagation(),t.closeBanner()})},closeBanner:function(){$(this.selectors.banner).addClass("pab__closed"),"function"==typeof moveScrollerListings&&setTimeout(moveScrollerListings,10);var e=new Date;e.setTime(e.getTime()+6048e5),document.cookie=`desktopAppBanner=1; expires=${e.toUTCString()}; path=/`}},PierreAssistConf={selectors:{aiAssistButton:".pierre-assist-button",aiAssistButtonMain:".pierre-assist-button__main",promptRow:"#prompt__row",panelLeftBackBtn:"#pierre_modal .panel-left__back-btn",promptElemSendBtn:"#prompt__elem-send_btn",chatContainer:".chat__container .chat__scroller",historyListContainer:".pierre_header__title-list",historyListWrapper:".pierre_header__title-wrap"},opened:!1,locked:!0,errormsg:"",first_click:1,first_map:1,timeout_func:0,clickBlocker:0,map_view_mode:1,google_map:null,google_infowindow:null,react_map_opened:!1,marker:null,place:{lat:null,lng:null},askGeoAlways:!1,lock:function(e){var t=$(PierreAssistConf.selectors.promptRow);t.prop("disabled",e?"disabled":""),(PierreAssistConf.locked=e)||t.val("")},api:function(e,s){let t=arguments,o=getCookie("assistant");var i=getCookie("geo"),n=getCookie("geo_last"),i=(void 0===o&&(o=""),e.hash_cookie=o,e.language="undefined"!=typeof browser_language?browser_language:"en_US","undefined"!=typeof assistant_alterip&&(e.assistant_alterip=assistant_alterip),"undefined"!=typeof assistant_debugger&&(e.assistant_debugger=assistant_debugger),void 0!==i?e.geo_cookie=i:void 0!==n&&(e.geo_cookie=n),e.hours=(new Date).getHours(),window.location.hostname),n=i.match(/restaurant/)?RGPage.site_search_host_full:"http://search."+i;$.ajax({url:n+"/pierre_assistant",method:"POST",data:e,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){var t=e.hasOwnProperty("hash")?e.hash:"";(!o&&t||o&&t&&o!==t)&&setCookie("assistant",t,{path:"/",expires:15552e3}),s(e)},error:function(e){console.log("Error request!",e),"function"==typeof t[2]&&t[2](e)}})},ping:function(){PierreAssistConf.api({name:"ping"},function(e){e.success?($(".chat__item-spinner").remove(),$(ChatBotUI.selectors.headerTitle).removeClass("disabled"),PierreAssistConf.append(e.response,e)):PierreAssistConf.opened&&(PierreAssistConf.timeout_func=setTimeout(PierreAssistConf.ping,1500),e=e.hasOwnProperty("wait_message")?e.wait_message:"")&&$(".chat__item-spinner .chat__item-ai-waitmsg").removeClass("hide").html(e)},function(e){PierreAssistConf.opened&&(PierreAssistConf.timeout_func=setTimeout(PierreAssistConf.ping,2500))})},append:function(e){var t,s=1<arguments.length?arguments[1]:null;""===e?PierreAssistConf.loadExamples(s):((t=$(".chat__scroller")).html(t.html()+e),e=t.find(".chat__item-wrap:not(.chat__item-wrap-user):last-child .chat__item-txt"),t.find(".chat__item-wrap:not(.chat__item-wrap-user):last-child .chat__btns-wrap").hide(),t.find(".chat__item-wrap:not(.chat__item-wrap-user):last-child .chat__item-time").css({opacity:0}),e.length&&("1"===new URLSearchParams(window.location.search).get("pierre_assist_activate")?ChatBotUI.callbackAfterTyping():ChatBotUI.gptLikeTyping(e,18)),PierreAssistConf.loadExamples(s,!0),ChatBotUI.scrollChat(1e3))},apiError:function(e){PierreAssistConf.append(PierreAssistConf.errormsg),console.log(e)},clearChat:function(){if(!PierreAssistConf.locked)return PierreAssistConf.api({name:"clear"},function(e){e.success&&(ChatBotUI.hideReadyPrompts(),PierreAssistConf.locked=!!e.locked,$(PierreAssistConf.selectors.chatContainer).html(e.content),updateChatSelect(e.history),PierreAssistConf.locked)&&PierreAssistConf.ping()},function(e){PierreAssistConf.apiError(e)}),this.lock(1),$(ChatBotUI.selectors.chatBtnScroll).hide(),!1},selectChat:function(e){if(!PierreAssistConf.locked)return $(ChatBotUI.selectors.headerTitleWrap).removeClass("shown"),$(ChatBotUI.selectors.headerTitle).addClass("disabled"),PierreAssistConf.api({name:"select",history:e},function(e){e.success&&($(PierreAssistConf.selectors.chatContainer).html(e.content),ChatBotUI.scrollChat(1e3),updateChatSelect(e.history),$(ChatBotUI.selectors.headerTitle).removeClass("disabled"),PierreAssistConf.locked=!!e.locked,PierreAssistConf.locked)&&PierreAssistConf.ping()},function(e){PierreAssistConf.apiError(e)}),this.lock(0),$(ChatBotUI.selectors.chatBtnScroll).hide(),!1},requestGeo:function(){return geo_locate.request_location(function(e){e=PierreAssistConf.parseGeoCoord(e);e.lat&&e.lng&&PierreAssistConf.sendMessage("#GEO "+e.lat+", "+e.lng,1)},function(e){},!0),!1},parseGeoCoord:function(e){return"object"==typeof e&&null==e?null:{lat:void 0===(e="object"==typeof e.coords?e.coords:e).latitude?0:e.latitude,lng:void 0===e.longitude?0:e.longitude}},firstMessage:function(e){PierreAssistConf.api({name:"first",success:e},function(){PierreAssistConf.ping()},function(e){PierreAssistConf.apiError(e)})},loadExamples:function(e,t=!1){e&&void 0!==e.examples&&e.examples&&0===$(ChatBotUI.selectors.chatPromptsContainer).length&&($(".chat__item-wrap:last-child").after(e.examples),t)&&$(ChatBotUI.selectors.chatPromptsContainer).hide()},submitAutoReply:function(e){e=$(e).html();PierreAssistConf.sendMessage(e,0,{examples:1})},openChatMap:function(){PierreAssistConf.first_map?$.cachedScript("https://maps.googleapis.com/maps/api/js?key="+map_api_key+"&libraries=places,geometry&callback=initMap&loading=async").done(function(){PierreAssistConf.first_map=0,PierreAssistConf.openChat()}):PierreAssistConf.openChat()},openChat:function(){let t=$("body");0<this.clickBlocker||(ChatBotUI.showHideLoader("show"),this.clickBlockerMethod(),!1===PierreAssistConf.opened&&PierreAssistConf.api({name:"open",first:PierreAssistConf.first_click,page:RGPage||{},mobile:is_mobile()?1:0},function(e){PierreAssistConf.opened=!0,PierreAssistConf.hash=e.hash,PierreAssistConf.locked=!!e.locked,PierreAssistConf.errormsg=e.errormsg,PierreAssistConf.first_click=0,browser_language=e.browser_language||"en_US",t.prepend(e.content),PierreAssistConf.loadExamples(e),$(".pierre-assist-button").hide(),""!==$(PierreAssistConf.selectors.historyListContainer).html().trim()&&$(PierreAssistConf.selectors.historyListWrapper).show(),ChatBotUI.init(),ChatBotUI.scrollChat(0,!0),ChatBotUI.toggleBodyScroll(),ChatBotUI.disableConfirmBtns(!1),AiBanner.closeBanner(),ChatBotUI.showHideLoader("hide"),void 0!==e.geo_request&&e.geo_request?geo_locate.request_location(function(e){PierreAssistConf.firstMessage(1)},function(e){PierreAssistConf.firstMessage(0)},!0):PierreAssistConf.locked&&PierreAssistConf.ping(),$(PierreAssistConf.selectors.panelLeftBackBtn).on("click",function(){PierreAssistConf.opened=!1,$("#pierre_modal").remove(),$(".pierre-assist-button").show();var e=window_match_media(740,"max")||$(this).is(".back-btn__full-windowed");return ChatBotUI.unblockBodyScroll(e),PierreAssistConf.timeout_func&&(clearTimeout(PierreAssistConf.timeout_func),PierreAssistConf.timeout_func=0),!1}),$(PierreAssistConf.selectors.promptElemSendBtn).on("click",function(){var e=$("#prompt__row").val().trim();return e&&PierreAssistConf.sendMessage(e,0),!1}.bind(this))},function(e){ChatBotUI.showHideLoader("hide")}))},openConfirmMap:function(e,t){var e=($(e).closest(".chat__btns-wrap").find("a").attr("data-coords")||"").split(","),s=parseFloat(e[0]),o=parseFloat(e[1]);if(PierreAssistConf.map_view_mode=t,"function"==typeof openMap){PierreAssistConf.react_map_opened=!0;let e=function(){PierreAssistConf.react_map_opened=!1,document.removeEventListener("closeMap",e),document.removeEventListener("mapClosed",e)};document.addEventListener("closeMap",e),document.addEventListener("mapClosed",e),Number.isNaN(s)||Number.isNaN(o)||(window.MapConfig=window.MapConfig||{},window.MapConfig.center_method="point_on_map",window.MapConfig.center_position={lat:s,lng:o},window.map_center={lat:s,lng:o}),openMap({assistantConfirm:!0,onApply:function(e,t){void 0!==e&&void 0!==t&&(PierreAssistConf.sendMessage("#MAP "+e+","+t,1),document.dispatchEvent(new CustomEvent("closeMap")))}})}else 2<=e.length&&PierreAssistConf.openGoogleMap(...e);return!1},openGoogleMap:function(e,t){var s=new google.maps.LatLng(e,t);PierreAssistConf.google_infowindow=new google.maps.InfoWindow,$("#google_map_bot").remove();$("body").prepend('<div id="google_map_bot"></div><span id="apply_map_google" style="display:none">Apply</span><div class="map_expand_btn map_close_button"></div>'),$("#apply_map_google").on("click",function(){PierreAssistConf.closeMap(PierreAssistConf.place.lat,PierreAssistConf.place.lng)}),$(".map_close_button").on("click",function(){PierreAssistConf.closeMap()}),PierreAssistConf.google_map=new google.maps.Map(document.getElementById("google_map_bot"),{center:s,zoom:15,mapId:"54ef72884af31355",mapTypeControl:!1,fullscreenControl:!1}),PierreAssistConf.map_view_mode&&PierreAssistConf.placeMarker({lat:parseFloat(e),lng:parseFloat(t)}),PierreAssistConf.google_map.addListener("click",function(e){return PierreAssistConf.placeMarker(e.latLng),!1})},placeMarker:function(e){var t=PierreAssistConf.google_map;$("#apply_map_google").show(),PierreAssistConf.marker&&(PierreAssistConf.marker.setMap(null),PierreAssistConf.marker=null),PierreAssistConf.marker=new google.maps.Marker({position:e,map:t}),PierreAssistConf.marker.setMap(PierreAssistConf.google_map),google.maps.event.addListener(PierreAssistConf.marker,"click",e=>!1),PierreAssistConf.place.lat="number"==typeof e.lat?e.lat:e.lat(),PierreAssistConf.place.lng="number"==typeof e.lng?e.lng:e.lng()},closeMap:function(){$("#google_map_bot").remove(),$("#apply_map_google").remove(),$(".map_close_button").remove(),2===arguments.length&&PierreAssistConf.sendMessage("#MAP "+arguments[0]+","+arguments[1],1),setTimeout(function(){PierreAssistConf.google_map=null},250)},acceptFilters:function(){return PierreAssistConf.sendMessage("Confirm filters",1),!1},doButtonClick:function(e){return PierreAssistConf.sendMessage($(e).html(),0),!1},sendRealMessage:function(e,t,s,o){ChatBotUI.hideReadyPrompts(),ChatBotUI.disableConfirmBtns(),$(ChatBotUI.selectors.headerTitleWrap).removeClass("shown"),$(ChatBotUI.selectors.headerTitle).addClass("disabled"),PierreAssistConf.api({name:"message",content:e,hidden:t,options:o,geocoded:PierreAssistConf.parseGeoCoord(s)},function(e){$("#prompt__row").val("").height("20"),$(PierreAssistConf.selectors.promptElemSendBtn).addClass("disabled"),e.hasOwnProperty("captcha")&&e.captcha?window.location=window.location.href.replace(/[#?].*$/,"")+"?r="+Math.random():(e.message=ChatBotUI.sendingConfirm(e.message),PierreAssistConf.append((t?"":e.message)+e.spinner),PierreAssistConf.ping())},function(e){PierreAssistConf.lock(0),PierreAssistConf.apiError(e)}),PierreAssistConf.askGeoAlways&&(geo_locate.no_browser_answer_timeout=5)},sendMessage:function(t,s){if(PierreAssistConf.locked)return!1;let o=2<arguments.length?arguments[2]:{};return""!==(t=t.replace(/<[^>]*>/g,"")).trim()&&(PierreAssistConf.lock(1),PierreAssistConf.askGeoAlways?(geo_locate.no_browser_answer_timeout=300,geo_locate.request_location(function(e){PierreAssistConf.sendRealMessage(t,s,e,o)},function(e){PierreAssistConf.sendRealMessage(t,s,null,o)},!0)):PierreAssistConf.sendRealMessage(t,s,null,o),!0)},autoMessage:function(e){e=$(e).html();return PierreAssistConf.sendMessage(e,1),!1},init:function(){$(".pierre-assist-button").show(),$(document).on("click",this.selectors.aiAssistButton,this.openChatMap.bind(this)),$(document).on("click",ChatBotUI.selectors.suggestRow,function(){$(PierreAssistConf.selectors.aiAssistButton).click(),$(".m_filter_cancel").length&&$(".m_filter_cancel").click()}),$(ChatBotUI.selectors.chatCloseBtn).on("click",function(e){ChatBotUI.closeChatBtn(e)}),getCookie("reopen_assistant_modal")&&(this.openChatMap(),setCookie("reopen_assistant_modal","",{expires:-1,path:"/"}));var e=window.location.hash;"#pierre_assist__activate"===e&&$(PierreAssistConf.selectors.aiAssistButton).click(),"#pierre_assist__close"===e&&$(ChatBotUI.selectors.chatCloseBtn).click()},clickBlockerMethod:function(){this.clickBlocker=1,setTimeout(function(){PierreAssistConf.clickBlocker=0},1e3)}},ChatBotUI={selectors:{modal:"#pierre_modal",modal_windowed:"#pierre_modal.windowed",menuSearchOpen:"#menu-search__open",menuSearchClose:"#menu-search__close",menuDotsOpen:"#menu-dots__open",menuSearchRow:".menu-search__row",header:".pierre_header",headerTitle:".pierre_header__title",headerTitleWrap:".pierre_header__title-wrap",headerChatsDropdown:".pierre_header__title-list",panelRightMenuDots:".panel-right__menu-dots",panelRightFullWindow:"#panel-right__full-window",panelRightSmallWindow:"#panel-right__small-window",promptSendBtn:"#prompt__elem-send_btn",promptElem:".prompt__elem",promptRow:"#prompt__row",chatContainer:".chat__container",chatBtnScroll:"#chat__btn-scroll",chatTextContainer:".chat__item-txt",chatBtnsContainer:".chat__btns-wrap",chatConfirmBtn:".chat__btn-confirm",chatCloseBtn:".pierre-assist-button__close",chatPromptsContainer:".chat__prompts-container",chatClearBtn:"#panel-right__new-chat",suggestRow:".suggestion-link"},offset:{x:0,y:0},dragging:null,lock_scroll:!1,typing_in_progress:!1,page_scroll:0,mouseStatus:{isMouseDown:!1,isMouseOut:!1},init:function(){this.bindEvents(),this.dragInit(),this.mouseOutDetectorEvents(),this.page_scroll=$(window).scrollTop(),title_tooltips()},bindEvents:function(){$(this.selectors.headerTitle).on("click",this.toggleChats.bind(this)),$(this.selectors.promptSendBtn).on("click",this.scrollChat.bind(this)),$(this.selectors.promptElem).on("click",this.focusPromptArea.bind(this)),$(this.selectors.chatContainer).on("scroll",this.checkScroll.bind(this)),$(this.selectors.chatBtnScroll).on("click",this.scrollChat.bind(this)),$(this.selectors.chatBtnScroll).on("click",this.scrollChat.bind(this)),$(this.selectors.panelRightFullWindow).on("click",this.getFullWindow.bind(this)),$(this.selectors.panelRightSmallWindow).on("click",this.getSmallWindow.bind(this)),$(this.selectors.promptRow).on("input",function(){this.style.height="20px",this.style.height=this.scrollHeight+"px",0<$(this).val().length?$(ChatBotUI.selectors.promptSendBtn).removeClass("disabled"):$(ChatBotUI.selectors.promptSendBtn).addClass("disabled")}),$(this.selectors.promptRow).on("keypress",function(e){"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),$(ChatBotUI.selectors.promptSendBtn).click())}),$(document).on("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||(PierreAssistConf.google_map?PierreAssistConf.closeMap():PierreAssistConf.react_map_opened?document.dispatchEvent(new CustomEvent("closeMap")):$(PierreAssistConf.selectors.panelLeftBackBtn).click())}),$(ChatBotUI.selectors.chatClearBtn).on("touchstart click",function(){return PierreAssistConf.clearChat()}),$(document).on("mouseup",function(e){PierreAssistConf.google_map||PierreAssistConf.react_map_opened||$("#google_map_bot").has(e.target).length||ChatBotUI.mouseOutDetector()||($(ChatBotUI.selectors.modal).has(e.target).length?$(ChatBotUI.selectors.headerTitleWrap).has(e.target).length||ChatBotUI.hideChats():$(PierreAssistConf.selectors.panelLeftBackBtn).click())}),$(window).on("resize",this.toggleBodyScroll.bind(this)),window.addEventListener("wheel",this.preventScroll,{passive:!1});var e=this.selectors.chatContainer+","+this.selectors.headerChatsDropdown;$(e).on("wheel",function(e){var t=e.originalEvent.deltaY,s=this.scrollTop,o=this.scrollHeight,i=$(this).innerHeight();(t<0&&0===s||0<t&&o<=s+i)&&e.preventDefault()})},scrollChat:function(e=1e3,t=!1){$(this.selectors.chatContainer).length&&($(this.selectors.chatContainer).animate({scrollTop:$(this.selectors.chatContainer)[0].scrollHeight},e),t)&&this.focusPromptArea()},checkScroll:function(){var e=this,t=$(e.selectors.chatContainer),s=t[0].scrollHeight,o=t.scrollTop();o+t.outerHeight()+10<s?($(e.selectors.chatBtnScroll).show(),e.resetTypingAutoscroll()):($(e.selectors.chatBtnScroll).hide(),e.lock_scroll=!1),e.headerBorderObserver(o)},getFullWindow:function(){$(this.selectors.modal).removeClass("windowed"),$(this.selectors.panelRightFullWindow).hide(),$(this.selectors.panelRightSmallWindow).show(),this.blockBodyScroll(),this.checkScroll()},getSmallWindow:function(){$(this.selectors.modal).addClass("windowed"),$(this.selectors.panelRightSmallWindow).hide(),$(this.selectors.panelRightFullWindow).show(),this.unblockBodyScroll(!0),this.checkScroll()},toggleChats:function(){$(this.selectors.headerTitleWrap).toggleClass("shown")},hideChats:function(){$(this.selectors.headerTitleWrap).removeClass("shown")},focusPromptArea:function(){$(this.selectors.promptRow).focus()},blockBodyScroll:function(){this.page_scroll=$(window).scrollTop(),$("body").addClass("noScroll")},unblockBodyScroll:function(e=!1){$("body").removeClass("noScroll"),e&&$(window).scrollTop(ChatBotUI.page_scroll)},toggleBodyScroll:function(){$(this.selectors.modal).length&&(window_match_media(740,"max")||window_match_media(741,"min")&&!$(ChatBotUI.selectors.modal).hasClass("windowed"))&&this.blockBodyScroll()},gptLikeTyping:function(e,r){let a=this,l=(a.typing_in_progress=!0,$(e));var e=l.html(),t=(l.html(""),l.css("visibility","visible"),document.createElement("div"));t.innerHTML=e;let s=Array.from(t.childNodes);!function e(t){if(t<s.length){var o=s[t];if(o.nodeType===Node.TEXT_NODE){var i=o.textContent,n=function(){e(t+1)};let s=0;!function e(){var t;s<i.length?(t=i.codePointAt(s),l.append(String.fromCodePoint(t)),s+=65535<t?2:1,setTimeout(e,r)):n(),a.lock_scroll||a.scrollChat(0,!0)}()}else l.append(o),e(t+1),a.lock_scroll||a.scrollChat(0)}else ChatBotUI.callbackAfterTyping()}(0)},dragInit:function(){let r=this;$(document).on("mousedown",r.selectors.modal_windowed,function(e){$(e.target).is(r.selectors.chatTextContainer)||$(r.selectors.promptElem).has(e.target).length||$(e.target).is(r.selectors.promptElem)||(r.dragging=$(this),r.offset.x=e.clientX-r.dragging.position().left,r.offset.y=e.clientY-r.dragging.position().top,r.dragging.css({cursor:"grabbing"}),e.preventDefault())}),$(document).on("mousemove",function(e){var t,s,o,i,n;r.dragging&&(n=e.clientX-r.offset.x,e=e.clientY-r.offset.y,t=$(window).innerWidth(),s=$(window).innerHeight(),o=r.dragging.outerWidth(),i=r.dragging.outerHeight(),n=Math.max(0,Math.min(t-o,n)),e=Math.max(0,Math.min(s-i,e)),r.dragging.css({left:n+"px",top:e+"px"}))}),$(document).on("mouseup",function(){r.dragging&&(r.dragging.css({cursor:"grab"}),r.dragging=null)})},sendingConfirm:function(e){e=$(e);return e.find(".chat__item-check").addClass("sended"),setTimeout(function(){$(".chat__item-check.sended").removeClass("sended")},800),e.prop("outerHTML")},resetTypingAutoscroll:function(){this.typing_in_progress&&!this.lock_scroll&&(this.lock_scroll=!0)},preventScroll:function(e){$(ChatBotUI.selectors.chatContainer).has(e.target).length||$(ChatBotUI.selectors.headerChatsDropdown).has(e.target).length||!$(ChatBotUI.selectors.modal).hasClass("windowed")||$(ChatBotUI.selectors.modal).has(e.target).length&&e.preventDefault()},mouseOutDetectorEvents:function(){let e=this;$(window).on("mousedown",function(){e.mouseStatus.isMouseDown=!0,e.mouseStatus.isMouseOut=!1}),$(window).on("mouseup",function(){e.mouseStatus.isMouseDown&&e.mouseStatus.isMouseOut,e.mouseStatus.isMouseDown=!1,e.mouseStatus.isMouseOut=!1}),$(window).on("mouseleave",function(){e.mouseStatus.isMouseDown&&(e.mouseStatus.isMouseOut=!0)}),$(window).on("mouseenter",function(){e.mouseStatus.isMouseDown||(e.mouseStatus.isMouseOut=!1)})},mouseOutDetector:function(){return this.mouseStatus.isMouseDown&&this.mouseStatus.isMouseOut},headerBorderObserver:function(e){24<e?$(ChatBotUI.selectors.header).addClass("bottom_border"):$(ChatBotUI.selectors.header).removeClass("bottom_border")},showReadyPrompts:function(){$(this.selectors.chatPromptsContainer).show()},hideReadyPrompts:function(){$(this.selectors.chatPromptsContainer).remove(),$(".chat__item-spinner .chat__item-ai-waitmsg").addClass("hide")},disableConfirmBtns:function(e=!0){var t=$(this.selectors.chatConfirmBtn);(!e&&$(t[t.length-1]).closest(".chat__item-wrap:last-child").length?t.slice(0,-1):t).each(function(){$(this).addClass("disabled_link").removeAttr("onClick")})},showBtnsCallback:function(){$(this.selectors.chatBtnsContainer).show()},addFocusToTextarea:function(){$(this.selectors.promptElem).addClass("focused")},removeFocusToTextarea:function(){$(this.selectors.promptElem).removeClass("focused")},callbackAfterTyping:function(){PierreAssistConf.lock(0),ChatBotUI.lock_scroll=!1,ChatBotUI.typing_in_progress=!1,ChatBotUI.showBtnsCallback(),$(".chat__item-time").css({opacity:1}),setTimeout(function(){$(ChatBotUI.selectors.chatPromptsContainer).length&&ChatBotUI.showReadyPrompts()},10)},showHideLoader:function(t){var s=$(PierreAssistConf.selectors.aiAssistButtonMain).find("img");if(s.length){var o=$("body").hasClass("xmas_style")?"/img/pierre_assist/chat__avatar_xmas.gif":"/img/pierre_assist/chat__avatar_a.gif";let e=cdn_host+o;"show"===t&&(e=cdn_host+"/img/qr-menu/qr_loader.gif"),s.attr("src",e)}},closeChatBtn:function(e){e.stopPropagation(),setCookie("pierre_assist_hide","1",{path:"/",expires:86400}),$("body").removeClass("pierre_assist_enabled"),$(".pierre-assist-button").hide()}},AiBanner={cookieName:"pierre_assistant__banner-shown",cookieValue:"1",cookieDays:999,selectors:{banner:"#pierre_banner",closeBtn:".suggestion_btn--close"},init:function(){this.bindEvents()},bindEvents:function(){$(this.selectors.closeBtn).on("click",this.closeBanner.bind(this))},closeBanner:function(){this.setCookie(this.cookieName,this.cookieValue,this.cookieDays),$(this.selectors.banner).remove()},setCookie(e,t,s){let o="";var i;s&&((i=new Date).setTime(i.getTime()+24*s*60*60*1e3),o="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path=/"}};function updateChatSelect(e){e.length&&($(PierreAssistConf.selectors.historyListContainer).html(e),$(PierreAssistConf.selectors.historyListWrapper).show())}function splashPopup(){return}function title_tooltips(){if("undefined"!=typeof Tooltip){var e,t=["#panel-right__new-chat","#panel-right__full-window","#panel-right__small-window"];for(e in t)new Tooltip($(t[e]+" img").attr("alt"),t[e],{specClass:"tooltip__pierre-chat"})}}splashPopup(),window.initMap=function(){},$(function(){PierreAssistConf.init(),AiBanner.init(),void 0!==PierreAssistBanner&&PierreAssistBanner.init()}),void 0===window.Tooltip&&(window.Tooltip=class{constructor(e,t,s=!0,o={}){e?(this.specClass=o.specClass??"",this.sideMargin=o.sideMargin??0,this.baseTooltipMarkup=`
                    <div class="tooltip ${this.specClass}">
                        <div class="tooltip-arrow"></div>
                        <div class="tooltip-content"></div>
                    </div>
                `,this.content=e,this.targetElement=$(t),this.isMobile="function"==typeof is_mobile?is_mobile():/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||"ontouchstart"in window||0<navigator.maxTouchPoints,0===this.targetElement.length?console.warn('Target element "'+t+'" not found in the DOM.'):(this.alignElement=o.alignElement&&$(o.alignElement).length?$(o.alignElement):this.targetElement,this.alignX=o.alignX||"center",this.tooltip=null,this.blockMobileEvents=s,this.disabled=this.isMobile&&this.blockMobileEvents,this.bindEvents())):console.warn("Tooltip content is empty.")}bindEvents(){this.disabled||(this.isMobile&&!this.blockMobileEvents?(this.targetElement.on("touchstart",e=>this.showTooltip(e)),this.targetElement.on("touchend",()=>this.hideTooltip()),$(window).on("touchstart",e=>{!this.tooltip||$(e.target).closest(this.tooltip).length||$(e.target).is(this.targetElement)||this.hideTooltip()})):(this.targetElement.on("mouseenter",e=>this.showTooltip(e)),this.targetElement.on("mouseleave",()=>this.hideTooltip())),$(window).on("resize",()=>this.hideTooltip()))}showTooltip(e){e.preventDefault(),e.stopPropagation(),this.tooltip=$(this.baseTooltipMarkup),this.tooltip.find(".tooltip-content").html(this.content),$("body").append(this.tooltip);var e=this.targetElement.offset(),t=this.targetElement.outerWidth(),s=this.targetElement.outerHeight(),o=this.alignElement.offset(),i=this.alignElement.outerWidth(),n=this.tooltip.outerWidth(),r=this.tooltip.outerHeight(),a=$(window).width(),l=$(window).height();let c=e.top+s+10,h;s=this.tooltip.find(".tooltip-arrow"),o.left,t=e.left+t/2;c+r>$(window).scrollTop()+l?0<e.top-r-10&&(c=e.top-r-10,s.removeClass("tooltip-arrow-bottom").addClass("tooltip-arrow-top"),s.css({top:"auto",transform:"translateX(-50%) rotate(180deg)"})):(s.removeClass("tooltip-arrow-top").addClass("tooltip-arrow-bottom"),s.css({bottom:"100%",transform:"translateX(-50%)"})),(h="left"===this.alignX?o.left:"right"===this.alignX?o.left+i-n:o.left+i/2-n/2)<0?h=this.sideMargin:h+n>a&&(h=a-n-this.sideMargin);let p=t-h-10;p<10?(p=10,console.log("1: "+p)):p+10>n-10&&(p=n-20,console.log("2: "+p)),s.css({left:p+10+"px"}),this.tooltip.css({top:c+"px",left:h+"px",display:"flex"})}hideTooltip(){this.tooltip&&this.tooltip.fadeOut(0,()=>{null!==this.tooltip&&(this.tooltip.remove(),this.tooltip=null)})}});